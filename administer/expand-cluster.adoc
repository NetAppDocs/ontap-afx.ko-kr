---
sidebar: sidebar 
permalink: administer/expand-cluster.html 
keywords: afx, afx system, expansion, cluster expansion, expand cluster, add nodes 
summary: AFX 클러스터의 컴퓨팅 용량은 스토리지 용량과 상관없이 확장할 수 있습니다.  확장은 중단 없이 수행되며, 노드 전체에서 볼륨이 재조정됨에 따라 성능이 선형적으로 향상됩니다.  이 기능은 AFX 사용자의 지속적인 요구에 맞춰 조정할 때 매우 중요한 이점이 됩니다. 
---
= AFX 스토리지 시스템 클러스터 확장
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
스토리지 용량과 상관없이 AFX 클러스터의 컴퓨팅 용량을 확장할 수 있습니다.  확장은 중단 없이 수행되며, 노드 전체에서 볼륨이 재조정됨에 따라 성능이 선형적으로 향상됩니다.  이 기능은 AFX 시스템 사용자의 지속적인 요구에 맞춰 조정할 때 매우 중요한 이점이 됩니다.



== 클러스터 확장을 준비하세요

AFX 클러스터를 확장하기 전에 기본 요구 사항과 문제 해결에 대한 일반적인 접근 방식을 숙지해야 합니다.



=== 요구 사항

클러스터 관리자 계정에 대한 자격 증명이 필요하고 SSH를 사용하여 ONTAP CLI에 연결할 수 있어야 합니다.  클러스터를 확장할 때는 짝수 개의 노드를 추가해야 하며 릴리스에 따라 AFX 시스템의 크기 제한을 준수해야 합니다.



=== 문제 해결

클러스터 확장을 수행할 때 알아야 할 몇 가지 개념과 문제 해결 시나리오가 있습니다.



==== 자동 볼륨 리밸런싱

ATM(자동 토폴로지 관리)은 클러스터 노드 전체에서 할당 불균형을 감지하고 볼륨을 재조정하는 내부 AFX 시스템 구성 요소입니다.  데이터를 복사하는 대신 메타데이터 업데이트를 사용하여 볼륨을 재배치하기 위해 ZCVM(Zero Copy Volume Move) 기술을 사용합니다.  ZCVM은 AFX 스토리지 시스템에서 사용할 수 있는 기본 볼륨 이동 기술입니다.



==== 가능한 문제 해결 시나리오

AFX 클러스터 확장과 관련된 볼륨 이동 중에 조사해야 할 몇 가지 시나리오가 있습니다.

ATM에서 볼륨이 이동되지 않습니다.:: 이는 클러스터가 이미 균형 상태에 있거나 이동할 수 있는 적합한 볼륨이 없는 경우 발생할 수 있습니다.
ATM이 언제, 어떻게 작동해야 하는지에 대한 혼란:: 예상했던 것만큼 볼륨이 빠르게 배포되지 않는 것처럼 보일 수 있습니다.  ATM은 5분마다 하드웨어 이벤트를 감지하고 대응하려고 시도합니다.  최악의 경우, 마지막 작업이 완료된 후 40분 후에 재조정 작업이 시작됩니다.




==== CLI 명령

클러스터 확장 작업을 모니터링하는 데 사용할 수 있는 명령은 여러 가지가 있습니다.

* `volume move show`
* `volume move show -instance`


필요한 경우 NetApp 지원팀에 문의하여 추가 지원을 받으세요.



== 클러스터를 확장하려면 노드를 추가하세요

이 절차에서는 기존 클러스터에 노드 쌍을 추가하는 방법을 설명하며 다른 배포 환경에도 적용할 수 있습니다.  ONTAP CLI와 System Manager 관리 인터페이스를 모두 사용해야 합니다.

.단계
. ONTAP CLI에 연결하고 고급 권한 수준을 설정합니다.
+
`afx> set advanced`

. 현재 노드의 볼륨 위치를 표시합니다. 노드당 볼륨 수를 기록하세요.
+
`afx> vol show -fields node,size,constituent-count -is-constituent true -node *`

. 클러스터 상호 연결 IP 주소를 표시하고 이후 단계에서 사용할 수 있도록 저장합니다.
+
`afx> net int show -role cluster`

. 클러스터에 추가하려는 각 노드의 서비스 프로세서에 로그인합니다.
. 프롬프트에서 *시스템 콘솔*을 입력하여 노드 콘솔에 액세스합니다.
. 부팅 메뉴 프롬프트를 표시하려면 노드를 부팅합니다.
+
`LOADER> boot_ontap menu`

+
메뉴가 로드되지 않으면 *Ctrl+C* 기술을 사용하여 부팅 메뉴에 액세스하세요.

. 메뉴에서 적절한 부팅 옵션 중 하나를 선택하세요. 메시지가 표시되면 *예*를 입력하여 계속하세요.
+
여기에서 LOADER로 다시 돌아가면 LOADER 프롬프트에서 *boot_ontap*을 입력하세요.

. 클러스터 설정 마법사를 사용하여 노드 관리 LIF, 서브넷 및 게이트웨이를 구성합니다.
+
이 구성은 시스템 관리자가 클러스터에 추가할 노드를 감지하는 데 사용됩니다.  포트, IP 주소, 넷마스크, 기본 게이트웨이 등 프롬프트에 따라 값을 입력합니다.

. *CTL+C*를 눌러 CLI에 접속하세요.
. 네트워크에서 라우팅 가능하도록 클러스터 상호 연결 주소를 수정하세요. 사용자 환경에 적합한 구성을 사용하세요.
+
`afx> net int show -role cluster`

+
`afx> net int modify -vserver Cluster -lif clus1 -address 192.168.100.201`

+
`afx> net int modify -vserver Cluster -lif clus2 -address 192.168.100.202`

+
이 단계는 다른 인터페이스가 ONTAP 자동으로 생성하는 169.254.xx 주소를 사용하지 않는 경우에만 필요합니다.

. 다른 AFX 노드 컨트롤러에서도 위의 단계를 반복합니다.
. 클러스터 관리 IP 주소를 사용하여 시스템 관리자에 액세스합니다.
. 시스템 관리자에서 *클러스터*를 선택한 다음 *개요*를 선택합니다. *노드* 탭을 선택합니다.
. *이 클러스터에 속하지 않음* 섹션을 찾아 선택하세요.image:icon_add_blue_bg.png["더하기 기호 뒤에 흰색 글자로 'add'라는 단어가 붙은 파란색 사각형"] .
+
** 클러스터 상호 연결 IP 주소가 변경되기 전에 노드가 검색된 경우 창을 종료하고 뒤로 돌아가서 노드를 다시 검색해야 합니다.
** 선택적으로 System Manager 대신 CLI를 사용하여 노드를 추가할 수 있습니다. 명령을 참조하세요. `cluster add-node` .


. *노드 추가* 메뉴에서 구성 세부 정보를 제공합니다. 관리 IP 주소는 수동으로 또는 서브넷을 사용하여 추가할 수 있습니다.
. ONTAP CLI에 연결하여 노드 추가 작업의 상태를 모니터링합니다.
+
`afx> add-node-status`

. 작업이 완료되면 모든 노드에서 볼륨 배치를 확인합니다. 적절한 노드 이름을 사용하여 각 노드에 대해 한 번씩 명령을 실행합니다.
+
`afx> set advanced`

+
`afx> vol show -fields node,size,constituent-count -is-constituent true -node NODE_NAME`



.결과
* 클러스터에 새로운 노드를 추가하는 것은 중단되지 않습니다.
* 볼륨 이동은 자동으로 이루어져야 합니다.
* 성능은 선형적으로 확장됩니다.




== 관련 정보

* link:../get-started/prepare-cluster-admin.html["AFX 시스템 관리를 준비하세요"]
* link:../faq-ontap-afx.html["ONTAP AFX 스토리지 시스템에 대한 FAQ"]
* https://mysupport.netapp.com/["NetApp 지원 사이트"^]

